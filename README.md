# ğŸ™ï¸ AI Assistant - è¯­éŸ³èŠå¤©åŠ©æ‰‹

ä¸€ä¸ªç«¯åˆ°ç«¯çš„è¯­éŸ³èŠå¤©åŠ©æ‰‹/é™ªä¼´æœºå™¨äººé¡¹ç›®ï¼Œæä¾›è‡ªç„¶çš„è¯­éŸ³äº¤äº’ä½“éªŒã€‚

åŸºäº [å°æ™º AI](https://github.com/78/xiaozhi-esp32) å¼€æºç”Ÿæ€ï¼Œå®ç° Python æœåŠ¡ç«¯ï¼Œé…åˆ ESP32 ç¡¬ä»¶ç«¯ä½¿ç”¨ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ¤ **è¯­éŸ³è¾“å…¥** - å®æ—¶è¯­éŸ³è¯†åˆ«ï¼Œæ”¯æŒä¸­æ–‡å¯¹è¯
- ğŸ¤– **æ™ºèƒ½å¯¹è¯** - åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„æ™ºèƒ½å›å¤
- ğŸ”Š **è¯­éŸ³è¾“å‡º** - è‡ªç„¶è¯­éŸ³åˆæˆï¼Œæµç•…çš„å¯¹è¯ä½“éªŒ
- ğŸ“ **æ–‡æœ¬å¤„ç†** - æ”¯æŒæ‘˜è¦ã€æ€»ç»“ç­‰æ–‡æœ¬ä»»åŠ¡
- ğŸ”Œ **ç¡¬ä»¶æ”¯æŒ** - å…¼å®¹ 70+ ç§ ESP32 å¼€å‘æ¿
- ğŸŒ **MCP åè®®** - æ”¯æŒè®¾å¤‡æ§åˆ¶å’Œæ™ºèƒ½å®¶å±…è”åŠ¨

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ESP32 ç¡¬ä»¶ç«¯      â”‚   WebSocket/Opus   â”‚    Python æœåŠ¡ç«¯     â”‚
â”‚  (xiaozhi-esp32)    â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚     (æœ¬é¡¹ç›®)         â”‚
â”‚                     â”‚                    â”‚                     â”‚
â”‚  â€¢ è¯­éŸ³é‡‡é›† (Mic)    â”‚                    â”‚  â€¢ ASR è¯­éŸ³è¯†åˆ«      â”‚
â”‚  â€¢ è¯­éŸ³æ’­æ”¾ (Speaker)â”‚                    â”‚  â€¢ LLM å¯¹è¯ç”Ÿæˆ      â”‚
â”‚  â€¢ æ˜¾ç¤ºå±/LED        â”‚                    â”‚  â€¢ TTS è¯­éŸ³åˆæˆ      â”‚
â”‚  â€¢ å”¤é†’è¯æ£€æµ‹        â”‚                    â”‚  â€¢ MCP è®¾å¤‡æ§åˆ¶      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
                                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                           â”‚     AI æœåŠ¡         â”‚
                                           â”‚  â€¢ æ™ºè°± GLM         â”‚
                                           â”‚  â€¢ Gitee AI         â”‚
                                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.11+
- [UV](https://github.com/astral-sh/uv) - ç°ä»£åŒ–çš„ Python åŒ…ç®¡ç†å™¨

### å®‰è£… UV

```bash
# Windows (PowerShell)
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"

# macOS/Linux
curl -LsSf https://astral.sh/uv/install.sh | sh
```

### é¡¹ç›®è®¾ç½®

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd ai-assistant

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–
uv venv
uv sync

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ API å¯†é’¥
```

### è¿è¡Œé¡¹ç›®

```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ (å¯é€‰ï¼Œuv run ä¼šè‡ªåŠ¨ä½¿ç”¨)
# Windows
.venv\Scripts\activate
# macOS/Linux
source .venv/bin/activate

# è¿è¡Œä¸»ç¨‹åº
uv run python src/main.py
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
ai-assistant/
â”œâ”€â”€ AGENTS.md               # AI Agent æŒ‡å¯¼æ–‡ä»¶
â”œâ”€â”€ CLAUDE.md               # Claude ä¸“ç”¨é…ç½®
â”œâ”€â”€ README.md               # é¡¹ç›®è¯´æ˜æ–‡æ¡£ (æœ¬æ–‡ä»¶)
â”œâ”€â”€ .env.example            # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ .env                    # å®é™…ç¯å¢ƒå˜é‡ (éœ€è‡ªè¡Œåˆ›å»º)
â”œâ”€â”€ pyproject.toml          # é¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ src/                    # æœ¬é¡¹ç›® Python æœåŠ¡ç«¯æºä»£ç 
â”œâ”€â”€ SDK/                    # å‚è€ƒå®ç° (Git Submodule)
â”‚   â”œâ”€â”€ xiaozhi-esp32/      # ESP32 ç¡¬ä»¶ç«¯å›ºä»¶ (C++)
â”‚   â”œâ”€â”€ xiaozhi-esp32-server/ # Python äº‘ç«¯å‚è€ƒå®ç°
â”‚   â””â”€â”€ xiaozhi-mqtt-gateway/ # MQTT ç½‘å…³ (Node.js)
â”œâ”€â”€ tests/                  # æµ‹è¯•ç›®å½•
â””â”€â”€ docs/                   # æ–‡æ¡£ç›®å½•
```

### SDK ç»„ä»¶è¯´æ˜

| ç»„ä»¶ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| **ç¡¬ä»¶ç«¯** | `SDK/xiaozhi-esp32` | ESP32 å›ºä»¶ï¼Œæ”¯æŒ 70+ å¼€å‘æ¿ |
| **äº‘ç«¯æœåŠ¡** | `SDK/xiaozhi-esp32-server` | å®Œæ•´ Python æœåŠ¡ç«¯å‚è€ƒå®ç° |
| **MQTT ç½‘å…³** | `SDK/xiaozhi-mqtt-gateway` | MQTT+UDP â†’ WebSocket åè®®æ¡¥æ¥ |

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

å¤åˆ¶ `.env.example` ä¸º `.env` å¹¶é…ç½®ä»¥ä¸‹å˜é‡ï¼š

| å˜é‡å | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|--------|
| `LLM_API_KEY` | æ™ºè°± AI API å¯†é’¥ | `your-api-key` |
| `EMBEDDING_API_KEY` | Gitee AI Embedding å¯†é’¥ | `your-api-key` |
| `RERANK_API_KEY` | Gitee AI Rerank å¯†é’¥ | `your-api-key` |

### æ¨¡å‹é…ç½®

| ç”¨é€” | æ¨¡å‹ | è¯´æ˜ |
|------|------|------|
| ä¸€èˆ¬å¯¹è¯ | `glm-4.5-flash` | å¿«é€Ÿå“åº”ï¼Œé€‚åˆå®æ—¶å¯¹è¯ |
| æ‘˜è¦æ€»ç»“ | `glm-4-flash-250414` | é€‚åˆæ–‡æœ¬å¤„ç†ä»»åŠ¡ |
| æ–‡æœ¬åµŒå…¥ | `bge-m3` | 1024 ç»´å‘é‡ |
| é‡æ’åº | `bge-reranker-v2-m3` | è¯­ä¹‰ç›¸å…³æ€§æ’åº |

### äº‘ç«¯æœåŠ¡æ”¯æŒçš„æ¨¡å— (å‚è€ƒ SDK)

| æ¨¡å— | æ”¯æŒçš„å¹³å° |
|------|---------------|
| **ASR** | FunASR(æœ¬åœ°)ã€ç«å±±å¼•æ“ã€è®¯é£ã€é˜¿é‡Œäº‘ã€è…¾è®¯ã€ç™¾åº¦ |
| **LLM** | æ™ºè°± GLMã€é˜¿é‡Œç™¾ç‚¼ã€ç”µè±† Doubaoã€DeepSeekã€Geminiã€Ollama |
| **TTS** | EdgeTTS(å…è´¹)ã€ç«å±±å¼•æ“ã€é˜¿é‡Œäº‘ã€è…¾è®¯ã€è®¯é£ã€FishSpeech |
| **VAD** | SileroVAD(æœ¬åœ°) |
| **Memory** | mem0aiã€æœ¬åœ°çŸ­æœŸè®°å¿† |
| **Intent** | function_callã€intent_llm |

### MQTT ç½‘å…³æ•°æ®æµ

MQTT ç½‘å…³å°†ä½åŠŸè€— IoT è®¾å¤‡çš„ MQTT+UDP åè®®è½¬æ¢ä¸º WebSocketï¼Œå®ç°ä¸äº‘ç«¯æœåŠ¡çš„åŒå‘é€šä¿¡ï¼š

```
ESP32 â”€â”€MQTT(JSON)â”€â”€â–º Gateway â”€â”€WebSocketâ”€â”€â–º Python Cloud
      â”€â”€UDP(Opus)â”€â”€â”€â–º         â”€â”€Binaryâ”€â”€â”€â”€â–º
      â—„â”€â”€MQTT(JSON)â”€â”€         â—„â”€â”€WebSocketâ”€â”€
      â—„â”€â”€UDP(Opus)â”€â”€â”€         â—„â”€â”€Binaryâ”€â”€â”€â”€
```

**ç‰¹ç‚¹:**
- ğŸ” **HMAC-SHA256 è®¾å¤‡è®¤è¯** - é˜²æ­¢æœªæˆæƒè®¾å¤‡æ¥å…¥
- ğŸ”’ **AES-128-CTR éŸ³é¢‘åŠ å¯†** - æ¯ä¼šè¯éšæœºå¯†é’¥
- ğŸ“¡ **UDP ä½å»¶è¿Ÿä¼ è¾“** - 60ms å¸§ï¼Œæ”¯æŒåºåˆ—å·çº é”™
- ğŸ› ï¸ **REST API è®¾å¤‡ç®¡ç†** - è¿œç¨‹ä¸‹å‘æŒ‡ä»¤ã€æŸ¥è¯¢çŠ¶æ€

## ğŸ§ª å¼€å‘æŒ‡å—

### ä»£ç è´¨é‡

```bash
# æ ¼å¼åŒ–ä»£ç 
uv run ruff format .

# æ£€æŸ¥ä»£ç 
uv run ruff check .

# è¿è¡Œæµ‹è¯•
uv run pytest

# æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡
uv run pytest --cov=src
```

### æ·»åŠ ä¾èµ–

```bash
# å®‰è£…å•ä¸ªåŒ…
uv pip install <package-name>

# åŒæ­¥æ‰€æœ‰ä¾èµ–
uv sync
```

## ğŸ”— ç›¸å…³èµ„æº

### å°æ™º AI ç”Ÿæ€
- [xiaozhi-esp32](https://github.com/78/xiaozhi-esp32) - ESP32 ç¡¬ä»¶ç«¯å›ºä»¶
- [xiaozhi.me](https://xiaozhi.me) - å®˜æ–¹äº‘æœåŠ¡
- [å°æ™ºç™¾ç§‘å…¨ä¹¦](https://ccnphfhqs21z.feishu.cn/wiki/F5krwD16viZoF0kKkvDcrZNYnhb) - è¯¦ç»†æ•™ç¨‹

### ç¬¬ä¸‰æ–¹æœåŠ¡ç«¯å®ç°
- [xinnan-tech/xiaozhi-esp32-server](https://github.com/xinnan-tech/xiaozhi-esp32-server) - Python
- [joey-zhou/xiaozhi-esp32-server-java](https://github.com/joey-zhou/xiaozhi-esp32-server-java) - Java
- [AnimeAIChat/xiaozhi-server-go](https://github.com/AnimeAIChat/xiaozhi-server-go) - Golang

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'âœ¨ feat: æ·»åŠ æŸåŠŸèƒ½'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»º Pull Request
